<html>
	<head>
		<script>			
			function traverseShadowTree( base ) {
				console.log("New Base");
				console.log(base);
				console.log(base.shadowRoot);
				if(base != null && base.shadowRoot != null && base.shadowRoot.innerHTML != null) {
					var str = base.innerHTML;
					console.log(str);
					str = str.replace( "ha-sidebar", "");
					base.innerHTML = str;
				}
				if(base.shadowRoot != null)
					traverseShadowTree(base.shadowRoot);
				var matches = base.querySelectorAll("*");
				matches.forEach((sidebar) => {
					traverseShadowTree(sidebar);
					if(base.shadowRoot != null)
						traverseShadowTree(sidebar.shadowRoot);
				});
			}
			
			function removeSide() {
				var doc = document.getElementById('test').contentWindow.document
				//console.log(doc);
				//recurseShadowDom("home-assistant", doc);
				traverseShadowTree(doc);
				justStringItAndDeleteIt();
			}
			
			function recurseShadowDom( tag, doc ) {
				var matches = doc.querySelectorAll(tag);
				console.log("New Run");
				console.log(doc);
				console.log(tag);
				console.log(matches);
				matches.forEach((sidebar) => {
					if( tag == "home-assistant" ) {
						recurseShadowDom( "home-assistant-main", sidebar.shadowRoot );
					}
					if( tag == "home-assistant-main" ) {
						recurseShadowDom( "ha-drawer", sidebar.shadowRoot );
					}
					if( tag == "ha-drawer" ) {
						recurseShadowDom( "ha-sidebar", sidebar.shadowRoot );
					}
					if( tag == "ha-sidebar" ) {
						sidebar.innerHTML = "";
					}					
				});
			}
			
			function justStringItAndDeleteIt() {
				var str = document.getElementById('test').contentWindow.document.documentElement.innerHTML;
				console.log(str);
				str = str.replace( "ha-sidebar", "");
				document.getElementById('test').contentWindow.document.documentElement.innerHTML = str;
			}
		</script>
	</head>
	<body>
		<iframe width="100%" height="100%" src="http://homeassistant.local:8123/" id="test" name="test" onload="removeSide()"></iframe>
	</body>	
</html>